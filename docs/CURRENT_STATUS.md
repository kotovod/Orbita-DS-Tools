# Обновление: Пропуск скрытых объектов в DSV

## ✅ Выполнено

Добавлена настройка для пропуска скрытых объектов (с `visible = false`) в Design System Validator.

## Изменения

### 1. UI - новый чекбокс в настройках
- ✅ Добавлен чекбокс "Пропускать скрытые объекты"
- ✅ Размещен в блоке "Настройки" вместе с другими опциями
- ✅ Включен по умолчанию (`checked`)
- ✅ Добавлена подсказка-tooltip

### 2. JavaScript логика
- ✅ Чтение значения чекбокса
- ✅ Передача настройки `skipHiddenObjects` в плагин
- ✅ Значение по умолчанию: `true`

### 3. Валидация в code.js
- ✅ Проверка `node.visible === false` в функции `checkNodeVariables`
- ✅ Логирование пропущенных скрытых объектов
- ✅ Размещение проверки после COMPONENT_SET, но до других фильтров

## Как работает

**Рекурсивная проверка видимости:**

```javascript
// Вспомогательная функция
function isNodeOrParentHidden(node) {
  let currentNode = node;
  
  while (currentNode) {
    if ('visible' in currentNode && currentNode.visible === false) {
      return true; // Найден скрытый родитель
    }
    if (currentNode.type === 'PAGE' || !currentNode.parent) {
      break;
    }
    currentNode = currentNode.parent;
  }
  return false;
}

// В checkNodeVariables():
if (options.skipHiddenObjects !== false && isNodeOrParentHidden(node)) {
  console.log(`DSV: Пропущен скрытый объект: ${getSafeNodeName(node)} (${node.type})`);
  return;
}
```

**Важно:** Проверяется не только сам объект, но и **весь путь до корня**. Если хотя бы один родитель скрыт - объект считается скрытым и пропускается вместе со всеми детьми.

## Расположение в UI

**Design System Validator → Настройки**

```
☐ Пропускать Instance
☐ Только orb-* компоненты
☑ Пропускать значения = 0
☑ Пропускать скрытые объекты    ← НОВОЕ
```

## Файлы

- `ui.html` - UI и логика
- `code.js` - проверка в валидации
- `docs/DSV_SKIP_HIDDEN_OBJECTS.md` - подробная документация

## Готово к использованию

Настройка полностью готова к работе. Пользователь может:
- Оставить включенной (по умолчанию) - скрытые объекты пропускаются
- Отключить - скрытые объекты проверяются как обычные

### Особенности реализации

✅ **Рекурсивная проверка** - проверяется весь путь от объекта до корня (PAGE)  
✅ **Автоматический пропуск детей** - если родитель скрыт, все дети тоже считаются скрытыми  
✅ **Работает с Instance** - скрытые instances внутри скрытых Frame тоже пропускаются  
✅ **Оптимизация** - проверка выполняется в начале, до тяжёлых операций валидации
